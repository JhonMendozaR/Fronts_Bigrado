<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Usuarios - Bigrado</title>
    <link rel="stylesheet" href="/css/app.css">
    <link rel="icon" href="/img/Logo_Bigrado_negro.svg" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Topbar -->
    <div class="topbar">
        <div class="topbar-left">
            <div class="logo-section">
                <div class="logo">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 446 379" preserveAspectRatio="xMidYMid meet">
                        <g transform="translate(0,379) scale(0.1,-0.1)" fill="currentColor" stroke="none">
                            <path d="M1310 3728 c-58 -28 -130 -61 -160 -75 -56 -26 -145 -67 -260 -121
                                -408 -190 -529 -246 -673 -313 -93 -43 -177 -85 -188 -95 -25 -22 -26 -86 -2
                                -110 10 -9 83 -48 163 -86 79 -38 148 -74 152 -81 4 -7 8 -96 8 -199 l0 -187
                                -31 -36 c-26 -30 -30 -40 -25 -68 12 -55 10 -68 -27 -225 -20 -84 -37 -163
                                -37 -175 0 -44 14 -47 192 -47 238 0 240 2 158 227 -27 76 -50 141 -50 145 0
                                4 11 18 25 32 33 33 32 68 -5 109 l-30 35 0 156 c0 86 3 156 8 156 4 0 39 -17
                                77 -38 l70 -37 5 -260 c6 -301 2 -289 101 -349 164 -101 593 -303 660 -312 35
                                -5 60 0 121 25 83 33 330 142 418 185 l55 27 88 -42 87 -43 0 -266 c0 -246 1
                                -267 20 -297 27 -44 77 -74 355 -213 248 -123 412 -190 464 -190 68 0 439 171
                                457 211 19 41 56 198 49 209 -11 17 -31 11 -116 -37 -130 -73 -360 -173 -397
                                -173 -19 0 -80 18 -135 40 -127 51 -457 214 -486 241 -20 19 -21 29 -21 194
                                l0 173 243 -118 c309 -150 380 -180 428 -180 31 0 104 33 345 156 168 86 308
                                153 312 149 4 -3 8 -72 10 -152 7 -322 -91 -653 -265 -895 -314 -435 -878
                                -656 -1402 -548 -128 26 -199 50 -321 106 -280 131 -510 355 -648 629 -69 140
                                -104 272 -116 450 l-6 79 128 -127 c119 -117 132 -127 166 -127 55 0 96 43 96
                                101 0 43 -2 45 -216 260 -123 124 -226 219 -239 222 -13 2 -36 -2 -52 -9 -27
                                -12 -369 -343 -426 -412 -58 -71 -19 -162 69 -162 22 0 54 27 155 126 l128
                                127 5 -34 c3 -19 7 -79 10 -134 23 -445 362 -920 821 -1149 416 -207 863 -231
                                1284 -67 477 185 838 591 965 1086 33 132 46 270 46 502 l0 230 138 66 c75 36
                                190 91 254 121 102 47 120 59 134 90 14 29 15 39 4 65 -10 24 -31 39 -107 76
                                -52 25 -96 45 -98 45 -2 0 -93 43 -202 96 -109 53 -234 113 -278 134 -92 44
                                -286 136 -497 239 -111 53 -158 71 -190 71 -33 0 -95 -26 -292 -121 -138 -66
                                -261 -127 -273 -135 -21 -13 -23 -22 -23 -109 0 -52 4 -97 10 -100 11 -7 7 -9
                                345 154 126 61 235 111 241 111 6 0 178 -79 380 -176 203 -97 433 -207 511
                                -244 l142 -67 -206 -100 -206 -101 -305 149 c-167 82 -316 149 -329 149 -31 0
                                -93 -60 -93 -89 0 -62 21 -77 271 -201 l239 -119 -27 -15 c-16 -9 -111 -57
                                -212 -106 l-184 -91 -36 14 c-96 39 -604 285 -708 343 l-65 36 35 37 c20 20
                                41 49 47 65 7 18 10 122 10 284 l-1 255 240 113 c275 129 285 135 301 174 10
                                25 9 35 -6 65 -17 33 -38 45 -249 144 -126 60 -288 136 -360 171 -71 34 -166
                                79 -210 100 -81 38 -156 73 -409 194 -178 85 -198 86 -346 14z m525 -311 c582
                                -273 725 -341 725 -347 -1 -3 -78 -41 -173 -84 -95 -43 -344 -164 -553 -268
                                l-382 -189 -238 116 c-168 82 -235 119 -224 124 8 5 125 60 260 122 135 62
                                255 124 268 136 24 24 29 67 11 107 -11 23 -62 56 -88 56 -6 0 -111 -47 -233
                                -104 -123 -57 -273 -126 -334 -155 -61 -28 -116 -51 -123 -51 -16 0 -401 182
                                -401 190 0 3 163 82 362 175 200 94 444 209 543 257 119 58 188 86 205 83 14
                                -2 183 -77 375 -168z m323 -944 l-3 -188 -143 -72 c-79 -39 -230 -109 -335
                                -153 -161 -69 -198 -81 -232 -77 -47 5 -301 120 -465 210 l-115 63 -3 172 c-1
                                95 0 172 2 172 3 0 85 -39 183 -86 340 -165 384 -184 417 -184 24 0 130 49
                                358 164 177 90 326 164 331 165 4 0 6 -83 5 -186z"
                            />
                        </g>
                    </svg>
                </div>
                <div class="brand-text">
                    <h2>Bigrado</h2>
                    <p>Panel de Administración</p>
                </div>
            </div>
        </div>
        
        <div class="topbar-right">
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <button class="dropdown-toggle" onclick="toggleUserDropdown()">
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="user-dropdown">
                    <div class="user-details">
                        <h4>Administrator</h4>
                        <p>admin@bigrado.com</p>
                    </div>
                    <a href="#" onclick="goToSettings()">
                        <i class="fas fa-cog"></i>
                        Configuración
                    </a>
                    <a href="#" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                        Cerrar Sesión
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Layout principal -->
    <div class="main-layout">
        <!-- Sidebar -->
        <nav class="sidebar">
            <ul class="sidebar-menu">
                <li>
                    <a href="home.html">
                        <i class="fas fa-home"></i>
                        <span>Inicio</span>
                    </a>
                </li>
                <li>
                    <a href="usuarios.html" class="active">
                        <i class="fas fa-users"></i>
                        <span>Usuarios</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-university"></i>
                        <span>Universidades</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-book"></i>
                        <span>Programas curriculares</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-bullhorn"></i>
                        <span>Convocatorias</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-check-circle"></i>
                        <span>Validaciones</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-chart-bar"></i>
                        <span>Reportes</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-cogs"></i>
                        <span>Configuración</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Contenido principal -->
        <main class="main-content">
            <!-- <div class="breadcrumb">
                <a href="home.html">Inicio</a> / <a href="usuarios.html">Usuarios</a>
            </div> -->
            <!-- Header de página -->
            <div class="page-header">
                <div>
                    <h1>Usuarios</h1>
                    <p>Administra los usuario del sistema, gestiona roles y permisos.</p>
                </div>
                <button class="new-user-btn" onclick="openNewUserModal()">
                    <i class="fas fa-plus"></i>
                    Nuevo Usuario
                </button>
            </div>

            <!-- Cards de resumen -->
            <div class="summary-cards">
                <div class="summary-card">
                    <div class="summary-icon total">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="summary-content">
                        <h3>1,247</h3>
                        <p>Total Usuarios</p>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-icon students">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <div class="summary-content">
                        <h3>1,089</h3>
                        <p>Estudiantes</p>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-icon admins">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="summary-content">
                        <h3>12</h3>
                        <p>Administradores</p>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-icon support">
                        <i class="fas fa-hands-helping"></i>
                    </div>
                    <div class="summary-content">
                        <h3>146</h3>
                        <p>Profesionales de Apoyo</p>
                    </div>
                </div>
            </div>

            <!-- Filtros -->
            <div class="filters-section">
                <div class="filters-row">
                    <div class="filter-group">
                        <label for="search">Buscar Usuario</label>
                        <input type="text" id="search" placeholder="Nombre, email o teléfono...">
                    </div>
                    
                    <div class="filter-group">
                        <label for="role-filter">Filtrar por Rol</label>
                        <select id="role-filter">
                            <option value="">Todos los roles</option>
                            <option value="admin">Administrador</option>
                            <option value="student">Estudiante</option>
                            <option value="support">Profesional de Apoyo</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="status-filter">Filtrar por Estado</label>
                        <select id="status-filter">
                            <option value="">Todos los estados</option>
                            <option value="active">Activo</option>
                            <option value="inactive">Inactivo</option>
                            <option value="pending">Pendiente</option>
                        </select>
                    </div>
                    
                    <div class="filter-buttons">
                        <button class="filter-btn primary" onclick="applyFilters()">
                            <i class="fas fa-search"></i> Buscar
                        </button>
                        <button class="filter-btn secondary" onclick="clearFilters()">
                            <i class="fas fa-times"></i> Limpiar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tabla de usuarios -->
            <div class="users-table-container">
                <div class="table-header">
                    <h3>Lista de usuarios</h3>
                </div>

                <table class="users-table">
                    <thead>
                        <tr>
                            <th>Usuario</th>
                            <th>Documento</th>
                            <th>Rol</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="user-info-cell">
                                    <div class="user-avatar-table">
                                        MG
                                    </div>
                                    <div class="user-details-table">
                                        <div class="user-name">María García López</div>
                                        <div class="user-email">maria.garcia@estudiante.edu.co</div>
                                        <div class="user-phone">+57 320 123 4567</div>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="document-info">
                                    <div>CC.</div>
                                    <div class="document-number">1234567890</div>
                                </div>
                            </td>
                            <td>
                                <span class="role-badge student">Estudiante</span>
                            </td>
                            <td>
                                <span class="status-badge active">Activo</span>
                            </td>
                            <td>
                                <div class="actions-menu">
                                    <button class="actions-button" onclick="toggleDropdown(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="actions-dropdown">
                                        <a href="#" onclick="viewUser(1)">
                                            <i class="fas fa-eye"></i>
                                            Ver Detalles
                                        </a>
                                        <a href="#" onclick="editUser(1)">
                                            <i class="fas fa-edit"></i>
                                            Editar
                                        </a>
                                        <a href="#" onclick="toggleUserStatus(1)">
                                            <i class="fas fa-user-slash"></i>
                                            Desactivar
                                        </a>
                                        <a href="#" class="danger" onclick="deleteUser(1)">
                                            <i class="fas fa-trash"></i>
                                            Eliminar
                                        </a>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                <div class="user-info-cell">
                                    <div class="user-avatar-table">
                                        JR
                                    </div>
                                    <div class="user-details-table">
                                        <div class="user-name">Juan Carlos Rodríguez</div>
                                        <div class="user-email">juan.rodriguez@bigrado.com</div>
                                        <div class="user-phone">+57 310 987 6543</div>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="document-info">
                                    <div>TI.</div>
                                    <div class="document-number">9876543210</div>
                                </div>
                            </td>
                            <td>
                                <span class="role-badge admin">Administrador</span>
                            </td>
                            <td>
                                <span class="status-badge active">Activo</span>
                            </td>
                            <td>
                                <div class="actions-menu">
                                    <button class="actions-button" onclick="toggleDropdown(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="actions-dropdown">
                                        <a href="#" onclick="viewUser(2)">
                                            <i class="fas fa-eye"></i>
                                            Ver Detalles
                                        </a>
                                        <a href="#" onclick="editUser(2)">
                                            <i class="fas fa-edit"></i>
                                            Editar
                                        </a>
                                        <a href="#" onclick="toggleUserStatus(2)">
                                            <i class="fas fa-user-slash"></i>
                                            Desactivar
                                        </a>
                                        <a href="#" class="danger" onclick="deleteUser(2)">
                                            <i class="fas fa-trash"></i>
                                            Eliminar
                                        </a>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                <div class="user-info-cell">
                                    <div class="user-avatar-table">
                                        AM
                                    </div>
                                    <div class="user-details-table">
                                        <div class="user-name">Ana Sofía Martínez</div>
                                        <div class="user-email">ana.martinez@apoyo.edu.co</div>
                                        <div class="user-phone">+57 315 456 7890</div>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="document-info">
                                    <div>CC.</div>
                                    <div class="document-number">1122334455</div>
                                </div>
                            </td>
                            <td>
                                <span class="role-badge support">Prof. Apoyo</span>
                            </td>
                            <td>
                                <span class="status-badge inactive">Inactivo</span>
                            </td>
                            <td>
                                <div class="actions-menu">
                                    <button class="actions-button" onclick="toggleDropdown(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="actions-dropdown">
                                        <a href="#" onclick="viewUser(3)">
                                            <i class="fas fa-eye"></i>
                                            Ver Detalles
                                        </a>
                                        <a href="#" onclick="editUser(3)">
                                            <i class="fas fa-edit"></i>
                                            Editar
                                        </a>
                                        <a href="#" onclick="toggleUserStatus(3)">
                                            <i class="fas fa-user-check"></i>
                                            Activar
                                        </a>
                                        <a href="#" class="danger" onclick="deleteUser(3)">
                                            <i class="fas fa-trash"></i>
                                            Eliminar
                                        </a>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- Paginación -->
                <div class="pagination-container">
                    <div class="pagination-info">
                        Mostrando 1-10 de 1,247 resultados
                    </div>
                    <div class="pagination">
                        <button disabled>
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="active">1</button>
                        <button>2</button>
                        <button>3</button>
                        <button>...</button>
                        <button>125</button>
                        <button>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Modal de Nuevo Usuario -->
    <div id="newUserModal" class="modal" style="display:none;">
        <div class="modal-content new-user-modal-content">
            <span class="close-modal" onclick="closeNewUserModal()">&times;</span>
            <h2>Nuevo Usuario</h2>
            <form id="newUserForm" class="new-user-form">
                <!-- Tipo de usuario -->
                <div class="form-section">
                    <h3><i class="fas fa-user-tag"></i> Tipo de usuario</h3>
                    <div class="form-group">
                        <label for="role">Rol</label>
                        <select id="role" name="role" required>
                            <option value="">Seleccione un rol</option>
                            <option value="admin">Administrador</option>
                            <option value="support">Profesional de Apoyo</option>
                            <option value="student">Estudiante</option>
                        </select>
                    </div>
                </div>

                <!-- Información personal -->
                <div class="form-section">
                    <h3><i class="fas fa-user"></i> Información personal</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">Nombres</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Apellidos</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="idType">Tipo de identificación</label>
                            <select id="idType" name="idType" required>
                                <option value="">Seleccione</option>
                                <option value="cc">Cédula de Ciudadanía</option>
                                <option value="ti">Tarjeta de Identidad</option>
                                <option value="ce">Cédula de Extranjería</option>
                                <option value="pasaporte">Pasaporte</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="idNumber">Número de identificación</label>
                            <input type="text" id="idNumber" name="idNumber" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="birthDate">Fecha de nacimiento</label>
                            <input type="date" id="birthDate" name="birthDate" required>
                        </div>
                        <div class="form-group">
                            <label for="birthPlace">Lugar de nacimiento</label>
                            <input type="text" id="birthPlace" name="birthPlace" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="gender">Género</label>
                            <select id="gender" name="gender" required>
                                <option value="">Seleccione</option>
                                <option value="masculino">Masculino</option>
                                <option value="femenino">Femenino</option>
                                <option value="otro">Otro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="nationality">Nacionalidad</label>
                            <input type="text" id="nationality" name="nationality" required>
                        </div>
                    </div>
                </div>

                <!-- Información de contacto -->
                <div class="form-section">
                    <h3><i class="fas fa-address-card"></i> Información de contacto</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="address">Dirección</label>
                            <input type="text" id="address" name="address" required>
                        </div>
                        <div class="form-group">
                            <label for="city">Ciudad</label>
                            <input type="text" id="city" name="city" required>
                        </div>
                        <div class="form-group">
                            <label for="department">Departamento</label>
                            <input type="text" id="department" name="department" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Correo electrónico</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Teléfono</label>
                            <input type="text" id="phone" name="phone" required>
                        </div>
                    </div>
                </div>

                <!-- Contacto de emergencia -->
                <div class="form-section">
                    <h3><i class="fas fa-phone-alt"></i> Contacto de emergencia</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="emergencyName">Nombre</label>
                            <input type="text" id="emergencyName" name="emergencyName" required>
                        </div>
                        <div class="form-group">
                            <label for="emergencyRelation">Parentesco</label>
                            <input type="text" id="emergencyRelation" name="emergencyRelation" required>
                        </div>
                        <div class="form-group">
                            <label for="emergencyPhone">Teléfono</label>
                            <input type="text" id="emergencyPhone" name="emergencyPhone" required>
                        </div>
                    </div>
                </div>

                <!-- Seguridad -->
                <div class="form-section">
                    <h3><i class="fas fa-lock"></i> Seguridad</h3>
                    <div class="form-row">
                        <div class="form-group password-group">
                            <label for="password">Contraseña</label>
                            <div class="input-container">
                                <input type="password" id="password" name="password" required>
                                <button type="button" class="toggle-password" onclick="toggleNewUserPassword('password', 'togglePasswordIcon')">
                                    <i class="fas fa-eye" id="togglePasswordIcon"></i>
                                </button>
                            </div>
                        </div>
                        <div class="form-group password-group">
                            <label for="confirmPassword">Confirmar contraseña</label>
                            <div class="input-container">
                                <input type="password" id="confirmPassword" name="confirmPassword" required>
                                <button type="button" class="toggle-password" onclick="toggleNewUserPassword('confirmPassword', 'toggleConfirmPasswordIcon')">
                                    <i class="fas fa-eye" id="toggleConfirmPasswordIcon"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="primary-btn">Crear Usuario</button>
                    <button type="button" class="secondary-btn" onclick="closeNewUserModal()">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Ver Detalles del Usuario -->
    <div id="viewUserModal" class="modal" style="display:none;">
        <div class="modal-content view-user-modal-content">
            <span class="close-modal" onclick="closeViewUserModal()">&times;</span>
            <h2 id="viewUserTitle">Detalles del Usuario</h2>
            
            <div class="user-details-container">
                <!-- Información básica del usuario -->
                <div class="user-header">
                    <div class="user-avatar-large" id="viewUserAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-main-info">
                        <h3 id="viewUserName">Nombre del Usuario</h3>
                        <p id="viewUserEmail">email@example.com</p>
                        <div class="user-badges">
                            <span id="viewUserRole" class="role-badge">Rol</span>
                            <span id="viewUserStatus" class="status-badge">Estado</span>
                        </div>
                    </div>
                </div>

                <!-- Secciones de información -->
                <div class="user-details-sections">
                    <!-- Información personal -->
                    <div class="detail-section">
                        <h4><i class="fas fa-user"></i> Información Personal</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <label>Nombres:</label>
                                <span id="viewFirstName">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Apellidos:</label>
                                <span id="viewLastName">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Tipo de Identificación:</label>
                                <span id="viewIdType">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Número de Identificación:</label>
                                <span id="viewIdNumber">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Fecha de Nacimiento:</label>
                                <span id="viewBirthDate">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Lugar de Nacimiento:</label>
                                <span id="viewBirthPlace">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Género:</label>
                                <span id="viewGender">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Nacionalidad:</label>
                                <span id="viewNationality">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Información de contacto -->
                    <div class="detail-section">
                        <h4><i class="fas fa-address-card"></i> Información de Contacto</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <label>Dirección:</label>
                                <span id="viewAddress">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Ciudad:</label>
                                <span id="viewCity">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Departamento:</label>
                                <span id="viewDepartment">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Correo Electrónico:</label>
                                <span id="viewEmail">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Teléfono:</label>
                                <span id="viewPhone">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Contacto de emergencia -->
                    <div class="detail-section">
                        <h4><i class="fas fa-phone-alt"></i> Contacto de Emergencia</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <label>Nombre:</label>
                                <span id="viewEmergencyName">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Parentesco:</label>
                                <span id="viewEmergencyRelation">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Teléfono:</label>
                                <span id="viewEmergencyPhone">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Información del sistema -->
                    <div class="detail-section">
                        <h4><i class="fas fa-cogs"></i> Información del Sistema</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <label>Fecha de Registro:</label>
                                <span id="viewRegistrationDate">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Último Acceso:</label>
                                <span id="viewLastAccess">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Estado de la Cuenta:</label>
                                <span id="viewAccountStatus">-</span>
                            </div>
                            <div class="detail-item">
                                <label>ID del Usuario:</label>
                                <span id="viewUserId">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="primary-btn" onclick="editUserFromModal()">
                        <i class="fas fa-edit"></i> Editar Usuario
                    </button>
                    <button type="button" class="secondary-btn" onclick="closeViewUserModal()">
                        <i class="fas fa-times"></i> Cerrar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Editar Usuario -->
    <div id="editUserModal" class="modal" style="display:none;">
        <div class="modal-content new-user-modal-content">
            <span class="close-modal" onclick="closeEditUserModal()">&times;</span>
            <h2 id="editUserTitle">Editar Usuario</h2>
            <form id="editUserForm" class="new-user-form">
                <!-- Tipo de usuario -->
                <div class="form-section">
                    <h3><i class="fas fa-user-tag"></i> Tipo de usuario</h3>
                    <div class="form-group">
                        <label for="editRole">Rol</label>
                        <select id="editRole" name="role" required>
                            <option value="">Seleccione un rol</option>
                            <option value="admin">Administrador</option>
                            <option value="support">Profesional de Apoyo</option>
                            <option value="student">Estudiante</option>
                        </select>
                    </div>
                </div>

                <!-- Información personal -->
                <div class="form-section">
                    <h3><i class="fas fa-user"></i> Información personal</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editFirstName">Nombres</label>
                            <input type="text" id="editFirstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="editLastName">Apellidos</label>
                            <input type="text" id="editLastName" name="lastName" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editIdType">Tipo de identificación</label>
                            <select id="editIdType" name="idType" required>
                                <option value="">Seleccione</option>
                                <option value="cc">Cédula de Ciudadanía</option>
                                <option value="ti">Tarjeta de Identidad</option>
                                <option value="ce">Cédula de Extranjería</option>
                                <option value="pasaporte">Pasaporte</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editIdNumber">Número de identificación</label>
                            <input type="text" id="editIdNumber" name="idNumber" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editBirthDate">Fecha de nacimiento</label>
                            <input type="date" id="editBirthDate" name="birthDate" required>
                        </div>
                        <div class="form-group">
                            <label for="editBirthPlace">Lugar de nacimiento</label>
                            <input type="text" id="editBirthPlace" name="birthPlace" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editGender">Género</label>
                            <select id="editGender" name="gender" required>
                                <option value="">Seleccione</option>
                                <option value="masculino">Masculino</option>
                                <option value="femenino">Femenino</option>
                                <option value="otro">Otro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editNationality">Nacionalidad</label>
                            <input type="text" id="editNationality" name="nationality" required>
                        </div>
                    </div>
                </div>

                <!-- Información de contacto -->
                <div class="form-section">
                    <h3><i class="fas fa-address-card"></i> Información de contacto</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editAddress">Dirección</label>
                            <input type="text" id="editAddress" name="address" required>
                        </div>
                        <div class="form-group">
                            <label for="editCity">Ciudad</label>
                            <input type="text" id="editCity" name="city" required>
                        </div>
                        <div class="form-group">
                            <label for="editDepartment">Departamento</label>
                            <input type="text" id="editDepartment" name="department" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editEmail">Correo electrónico</label>
                            <input type="email" id="editEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="editPhone">Teléfono</label>
                            <input type="text" id="editPhone" name="phone" required>
                        </div>
                    </div>
                </div>

                <!-- Contacto de emergencia -->
                <div class="form-section">
                    <h3><i class="fas fa-phone-alt"></i> Contacto de emergencia</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editEmergencyName">Nombre</label>
                            <input type="text" id="editEmergencyName" name="emergencyName" required>
                        </div>
                        <div class="form-group">
                            <label for="editEmergencyRelation">Parentesco</label>
                            <input type="text" id="editEmergencyRelation" name="emergencyRelation" required>
                        </div>
                        <div class="form-group">
                            <label for="editEmergencyPhone">Teléfono</label>
                            <input type="text" id="editEmergencyPhone" name="emergencyPhone" required>
                        </div>
                    </div>
                </div>

                <!-- Cambio de contraseña (opcional) -->
                <div class="form-section">
                    <h3><i class="fas fa-lock"></i> Cambiar Contraseña (Opcional)</h3>
                    <div class="form-row">
                        <div class="form-group password-group">
                            <label for="editPassword">Nueva contraseña</label>
                            <div class="input-container">
                                <input type="password" id="editPassword" name="password">
                                <button type="button" class="toggle-password" onclick="toggleEditUserPassword('editPassword', 'toggleEditPasswordIcon')">
                                    <i class="fas fa-eye" id="toggleEditPasswordIcon"></i>
                                </button>
                            </div>
                            <small class="form-hint">Dejar vacío para mantener la contraseña actual</small>
                        </div>
                        <div class="form-group password-group">
                            <label for="editConfirmPassword">Confirmar nueva contraseña</label>
                            <div class="input-container">
                                <input type="password" id="editConfirmPassword" name="confirmPassword">
                                <button type="button" class="toggle-password" onclick="toggleEditUserPassword('editConfirmPassword', 'toggleEditConfirmPasswordIcon')">
                                    <i class="fas fa-eye" id="toggleEditConfirmPasswordIcon"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <input type="hidden" id="editUserId" name="userId">

                <div class="form-actions">
                    <button type="submit" class="primary-btn">Guardar Cambios</button>
                    <button type="button" class="secondary-btn" onclick="closeEditUserModal()">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Cambiar Estado del Usuario -->
    <div id="toggleUserStatusModal" class="modal" style="display:none;">
        <div class="modal-content toggle-status-modal-content">
            <span class="close-modal" onclick="closeToggleStatusModal()">&times;</span>
            <div class="status-modal-header">
                <div class="status-icon" id="toggleStatusIcon">
                    <i class="fas fa-user-slash"></i>
                </div>
                <h2 id="toggleStatusTitle">Desactivar Usuario</h2>
            </div>
            
            <div class="status-modal-body">
                <div class="user-info-summary">
                    <div class="user-avatar-small" id="toggleUserAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-summary-details">
                        <h4 id="toggleUserName">Nombre del Usuario</h4>
                        <p id="toggleUserEmail">email@example.com</p>
                        <span id="toggleUserRole" class="role-badge">Rol</span>
                    </div>
                </div>

                <div class="status-warning" id="statusWarning">
                    <div class="warning-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="warning-content">
                        <h4 id="warningTitle">¿Estás seguro de desactivar este usuario?</h4>
                        <p id="warningMessage">
                            Al desactivar este usuario, no podrá acceder al sistema hasta que sea activado nuevamente. 
                            Todas sus sesiones activas serán cerradas.
                        </p>
                    </div>
                </div>

                <div class="status-form">
                    <div class="form-group">
                        <label for="statusReason">Motivo del cambio de estado (opcional)</label>
                        <textarea id="statusReason" name="reason" rows="3" placeholder="Describe el motivo para desactivar/activar este usuario..."></textarea>
                    </div>
                </div>
            </div>

            <div class="status-modal-actions">
                <button type="button" id="confirmStatusBtn" class="danger-btn">
                    <i class="fas fa-user-slash"></i>
                    <span id="confirmStatusText">Desactivar Usuario</span>
                </button>
                <button type="button" class="secondary-btn" onclick="closeToggleStatusModal()">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Eliminar Usuario -->
    <div id="deleteUserModal" class="modal" style="display:none;">
        <div class="modal-content delete-user-modal-content">
            <span class="close-modal" onclick="closeDeleteUserModal()">&times;</span>
            <div class="delete-modal-header">
                <div class="delete-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h2>Eliminar Usuario</h2>
                <p class="delete-subtitle">Esta acción es permanente e irreversible</p>
            </div>
            
            <div class="delete-modal-body">
                <div class="user-info-summary">
                    <div class="user-avatar-small" id="deleteUserAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-summary-details">
                        <h4 id="deleteUserName">Nombre del Usuario</h4>
                        <p id="deleteUserEmail">email@example.com</p>
                        <span id="deleteUserRole" class="role-badge">Rol</span>
                    </div>
                </div>

                <div class="delete-warning">
                    <!-- <div class="warning-icon">
                        <i class="fas fa-skull-crossbones"></i>
                    </div> -->
                    <div class="warning-content">
                        <!-- <h4>⚠️ ADVERTENCIA CRÍTICA</h4> -->
                        <p>
                            Al eliminar este usuario se borrarán <strong>PERMANENTEMENTE</strong> todos sus datos:
                        </p>
                        <ul>
                            <li>✗ Información personal y de contacto</li>
                            <li>✗ Historial de actividades y sesiones</li>
                            <li>✗ Configuraciones y preferencias</li>
                            <li>✗ Archivos y documentos asociados</li>
                            <li>✗ Relaciones con otros registros</li>
                        </ul>
                        <!-- <p class="critical-note">
                            <strong>ESTA ACCIÓN NO SE PUEDE DESHACER.</strong> 
                            Considera <em>desactivar</em> el usuario en lugar de eliminarlo.
                        </p> -->
                    </div>
                </div>

                <div class="delete-confirmation">
                    <div class="confirmation-step">
                        <label class="confirmation-checkbox">
                            <input type="checkbox" id="confirmUnderstand">
                            <span class="checkmark"></span>
                            Entiendo que esta acción eliminará permanentemente todos los datos del usuario
                        </label>
                    </div>
                    
                    <div class="confirmation-step">
                        <label class="confirmation-checkbox">
                            <input type="checkbox" id="confirmIrreversible">
                            <span class="checkmark"></span>
                            Confirmo que esta acción es irreversible y no se puede deshacer
                        </label>
                    </div>

                    <div class="confirmation-step">
                        <label for="deleteConfirmText">
                            Para confirmar, escribe <strong id="confirmationText">ELIMINAR</strong> en el campo:
                        </label>
                        <input type="text" id="deleteConfirmText" placeholder="Escribe ELIMINAR para continuar">
                    </div>

                    <div class="delete-reason">
                        <label for="deleteReason">Motivo de la eliminación (requerido)</label>
                        <textarea id="deleteReason" name="reason" rows="3" placeholder="Explica el motivo por el cual es necesario eliminar este usuario..." required></textarea>
                    </div>
                </div>
            </div>

            <div class="delete-modal-actions">
                <button type="button" id="confirmDeleteBtn" class="critical-danger-btn" disabled>
                    <i class="fas fa-trash-alt"></i>
                    <span>Eliminar Usuario Permanentemente</span>
                </button>
                <button type="button" class="secondary-btn" onclick="closeDeleteUserModal()">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
                <button type="button" class="alternative-btn" onclick="suggestDeactivate()">
                    <i class="fas fa-user-slash"></i>
                    Mejor Desactivar Usuario
                </button>
            </div>
        </div>
    </div>

    <script src="/js/usuarios.js"></script>
</body>
</html>